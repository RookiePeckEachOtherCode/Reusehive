<template>
  <div style="display: grid;background-color: white">
    <div class="example-search">
      <t-search
          v-model="searchCondition"
          placeholder=" 搜索"
          @submit="onSearch"
          @action-click="onSearch"
      ></t-search>
    </div>

    <div style="padding: 0 16px">
      <t-swiper :autoplay="true" :navigation="{ type: 'dots' }"
                style="max-height: 25vh;max-width: 80vw;margin-left: 25px"
                @click="handleClick">
        <t-swiper-item v-for="(item, index) in swiperList" :key="index" style="height: 192px">
          <img :src="item" class="img"/>
        </t-swiper-item>
      </t-swiper>
    </div>

    <div>
      <t-grid :column="3" class="grid-demo" style="--td-grid-item-image-bg-color:transparent  ">
        <t-grid-item style="background-color: transparent" text="上架物品" @click="gosell">
          <template #image>
            <div class="icon-wrapper">
              <svg class="icon" height="32" p-id="4286" style="background-color: transparent"
                   t="1713516120911" version="1.1" viewBox="0 0 1024 1024" width="32"
                   xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M874.587354 584.152516c2.271971 0 6.27192 0 13.663825-0.575993 7.391905-0.575993 13.087832-0.575993 17.663774-0.575993s9.663876 1.151985 15.935796 2.271971c4.863938 0.735991 9.279881 3.13596 12.511839 6.815913 3.199959 4.031948 4.799939 9.087884 4.543942 14.239817v219.709185a193.501521 193.501521 0 0 1-56.351278 140.030206 182.877657 182.877657 0 0 1-136.030257 58.047257H276.931012a182.62166 182.62166 0 0 1-135.454265-58.047257 193.59752 193.59752 0 0 1-56.351278-140.030206v-219.709185a20.959731 20.959731 0 0 1 6.27192-15.359803 19.903745 19.903745 0 0 1 14.783811-6.815912c2.271971 0 6.27192 0 13.663824-0.575993 7.391905-0.575993 13.087832-0.575993 17.663774-0.575993 4.543942 0 9.663876 1.151985 15.935796 2.271971 4.863938 0.735991 9.279881 3.13596 12.51184 6.815913 3.199959 4.031948 4.799939 9.087884 4.543941 14.239817v219.709185a107.838618 107.838618 0 0 0 31.295599 77.983001 101.374701 101.374701 0 0 0 75.135038 32.447585h469.593983a101.630698 101.630698 0 0 0 75.71103-32.447585 107.838618 107.838618 0 0 0 31.295599-77.983001v-214.58925c0-2.655966 0.191998-5.343932 0.575993-7.967898a16.255792 16.255792 0 0 1 2.271971-7.391905c1.023987-1.983975 2.143973-3.87195 3.423956-5.695927a13.823823 13.823823 0 0 1 6.271919-5.119935c2.751965-0.703991 5.599928-1.087986 8.511891-1.119985zM512 0.159998c11.455853-0.159998 22.463712 4.607941 30.175613 13.087832L904.730968 387.195039c8.255894 8.063897 12.799836 19.199754 12.51184 30.751606 0.159998 11.67985-4.351944 22.943706-12.51184 31.295599a40.447482 40.447482 0 0 1-30.175613 12.51184h-191.805543v308.508047a43.74344 43.74344 0 0 1-42.687453 43.839438h-256.124718a43.71144 43.71144 0 0 1-42.687453-43.839438V461.754084H148.868653a39.903489 39.903489 0 0 1-29.599621-12.51184 44.383431 44.383431 0 0 1-13.087832-31.295599c-0.063999-11.615851 4.67194-22.719709 13.087832-30.751606L481.824387 13.24783c7.711901-8.479891 18.71976-13.24783 30.175613-13.087832z"
                    fill="#FFD43E" p-id="4287"></path>
              </svg>
            </div>
          </template>
        </t-grid-item>
        <t-grid-item text="功能菜单">
          <template #image>
            <div class="icon-wrapper">
              <svg class="icon" height="32" p-id="7865" t="1713516358855"
                   version="1.1" viewBox="0 0 1024 1024" width="32" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M351.3 190.5c-94.6 0-171.3 76.7-171.3 171.3s76.7 171.3 171.3 171.3h171.3V361.8c0-94.6-76.7-171.3-171.3-171.3zM766.1 190.5c94.6 0 162.3 76.7 162.3 171.3S851.7 533.2 757 533.2H585.7V361.8c0-94.6 85.8-171.3 180.4-171.3zM351.3 938.9c-94.6 0-171.3-76.7-171.3-171.3s76.7-171.3 171.3-171.3h171.3v171.3c0 94.6-76.7 171.3-171.3 171.3zM618.4 596.3h-32.7v171.3c0 94.6 76.7 171.3 171.3 171.3s171.3-76.7 171.3-171.3S851.7 596.3 757 596.3h-7.9"
                    fill="#C5E5FF" p-id="7866"></path>
                <path
                    d="M485.6 485.6H274.8C158.6 485.6 64 391.1 64 274.8S158.6 64 274.8 64s210.8 94.6 210.8 210.8v210.8zM274.8 85.1c-104.6 0-189.7 85.1-189.7 189.7s85.1 189.7 189.7 189.7h189.7V274.8c0.1-104.6-85-189.7-189.7-189.7zM749.2 485.6H538.3V274.8C538.3 160.6 639.7 64 759.7 64 873.9 64 960 154.6 960 274.8c0 116.3-94.6 210.8-210.8 210.8z m-189.8-21h189.7c104.6 0 189.7-85.1 189.7-189.7 0-108.2-77-189.7-179.2-189.7-108.6 0-200.3 86.9-200.3 189.7l0.1 189.7zM274.8 960C158.6 960 64 865.4 64 749.2s94.6-210.8 210.8-210.8h210.8v210.8c0 116.2-94.5 210.8-210.8 210.8z m0-400.6c-104.6 0-189.7 85.1-189.7 189.7s85.1 189.7 189.7 189.7 189.7-85.1 189.7-189.7V559.4H274.8zM749.2 960c-116.3 0-210.8-94.6-210.8-210.8V538.3h48.8c5.8 0 10.5 4.7 10.5 10.5s-4.7 10.5-10.5 10.5h-27.7V749c0 104.6 85.1 189.7 189.7 189.7S938.9 853.6 938.9 749s-85.1-189.7-189.7-189.7H740c-5.8 0-10.5-4.7-10.5-10.5s4.7-10.5 10.5-10.5h9.2c116.3 0 210.8 94.6 210.8 210.8S865.4 960 749.2 960z"
                    fill="#3B94FF" p-id="7867"></path>
              </svg>
            </div>
          </template>
        </t-grid-item>
        <t-grid-item text="失物招领" @click="golostfind">
          <template #image>
            <div class="icon-wrapper">
              <svg class="icon" height="48" p-id="9843" t="1713516445314"
                   version="1.1" viewBox="0 0 1024 1024" width="48" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M945.152 324.096c-100.864-239.616-377.344-352.256-616.96-250.88-76.288 32.256-142.336 83.456-192 149.504C87.552 286.72 55.808 362.496 44.544 441.856l-2.56 21.504c-7.168 75.264 3.584 153.088 34.816 227.328 100.864 239.616 377.344 352.256 616.96 250.88 76.288-32.256 142.336-83.456 192-149.504 99.328-130.048 127.488-307.2 59.392-467.968z m-260.096 593.408c-226.816 95.232-488.448-11.264-584.192-238.592C5.632 451.584 112.64 190.464 339.456 94.72c164.864-69.632 355.328-33.28 483.84 91.648 43.008 41.984 76.8 92.16 100.352 146.944 95.232 226.816-11.264 488.448-238.592 584.192z"
                    fill="#C7C7C7" p-id="9844"></path>
                <path
                    d="M908.8 339.456c-92.16-220.16-345.6-323.072-565.248-230.4C273.408 138.24 212.992 185.856 167.424 245.76 76.8 365.056 51.2 527.36 113.152 674.816c92.672 219.648 346.112 323.072 565.248 230.4 70.144-29.184 130.56-76.8 176.128-136.704 90.112-118.784 116.224-281.088 54.272-429.056z m-557.568 558.08C135.168 809.472 31.744 562.688 119.808 346.112c65.024-159.232 219.648-263.168 391.68-262.656 55.296 0 109.056 10.752 159.744 31.232 216.064 88.576 319.488 334.848 231.424 551.424-89.088 216.064-335.36 319.488-551.424 231.424z"
                    fill="#C7C7C7" p-id="9845"></path>
                <path
                    d="M428.544 825.344l-24.576 3.072c0.512 0.512-18.944-13.824-18.944-13.824l-4.608 23.04-20.48 13.312 22.016 11.264 7.168 22.528 18.432-16.384 24.576 0.512-10.752-21.504 7.168-22.016z m164.864-7.68l-18.432 16.896-24.064-0.512 9.728 22.016-9.216 23.04 24.064-3.072 18.944 14.848 5.632-23.552 20.48-13.824-20.992-11.776-6.144-24.064z m-9.216-623.616l23.552-5.632 20.992 12.8 3.072-23.552 19.456-14.848-23.04-9.728-8.704-22.016-16.896 17.408-24.576 1.536 12.288 20.48-6.144 23.552zM278.016 320c-36.864 46.08-59.392 101.888-64.512 160.256l7.68-3.584c3.072-27.136 9.728-53.76 19.968-78.848C301.568 248.832 470.528 177.152 619.52 237.056c25.088 10.24 48.64 23.552 70.144 39.936l7.68-3.584c-128.512-102.912-315.904-81.92-419.328 46.592zM224.768 348.16l-22.016-10.24-7.68-23.04-16.384 17.92-23.552 1.536 11.264 21.504-6.656 24.064 23.552-5.12c-0.512 0 18.944 13.824 18.944 13.824l3.072-25.088 19.456-15.36z m68.608-113.664l15.36 19.968 10.24-23.04 22.528-9.728-17.408-16.384-0.512-24.576-21.504 12.8-23.04-6.144 4.096 24.064-13.312 20.992 23.552 2.048z m158.208-46.592l18.432-16.896 24.064 0.512-9.216-22.016 9.216-23.04-24.576 3.584-18.944-14.848-5.12 23.552-20.48 13.824 20.992 11.776 5.632 23.552z m291.328 573.44l-15.36-18.944-10.24 22.528-22.528 9.216 17.408 15.872 0.512 25.088 20.992-12.8 23.04 6.144-4.096-24.064 13.312-20.992-23.04-2.048z m124.416-136.704l-23.04 5.12-19.456-13.312-2.56 24.576-18.944 15.36 20.992 10.24 8.192 23.552 16.384-18.432 23.552-1.024-11.264-21.504 6.144-24.576z m-123.392 68.096c36.864-46.08 59.392-101.888 64.512-160.256l-7.68 3.584c-3.072 27.136-9.728 53.76-19.968 78.848-59.904 148.992-229.376 221.184-378.368 160.768-25.088-10.24-48.64-23.552-70.144-39.936l-7.68 3.584c128 102.912 315.904 81.92 419.328-46.592z"
                    fill="#C7C7C7" p-id="9846"></path>
                <path
                    d="M672.768 283.648C550.4 194.56 378.368 221.696 289.28 344.064c-26.624 36.352-44.032 79.872-50.176 124.928l8.704-3.584c19.456-129.536 131.072-225.28 262.656-226.304 55.296 0 109.056 16.896 154.112 48.128l8.192-3.584z m-324.096 444.416c122.88 89.088 294.4 62.464 383.488-60.416 26.624-36.352 44.032-79.872 50.176-124.416l-8.704 3.584c-19.968 130.048-131.072 225.792-262.144 226.304-55.296 0-109.056-16.896-154.112-48.128l-8.704 3.072zM414.72 573.44l-20.992 49.152 79.872-33.792c11.264-4.608 17.408-7.68 18.944-9.216 1.536-1.536 2.048-2.56 2.048-3.584s0-2.56-1.024-4.608l-7.68-17.408 24.576-10.752 8.192 18.944c3.072 7.168 4.608 12.8 4.608 17.408 0 4.608-2.048 8.704-6.144 12.288-4.096 3.584-11.264 7.68-20.992 11.776l-131.584 56.32-8.704-20.48 24.576-50.688-40.448 16.896-9.216-21.504 68.608-29.184-10.24-23.552-67.584 28.672-8.704-20.48 67.584-28.672-8.704-20.48-67.072 28.672-8.704-22.528 132.608-56.32c2.048-1.024 3.072-1.536 3.584-2.56 0.512-1.024 0-2.56-0.512-4.096l-1.536-4.096 25.6-10.752 5.12 11.776c2.048 5.12 3.072 9.728 3.072 13.824s-5.12 7.68-13.312 11.264l-51.712 22.016 8.704 20.48 71.168-30.208 8.704 20.48-71.168 30.208 10.24 23.552 71.68-30.72 9.216 21.504L414.72 573.44zM709.632 484.864l9.216 22.016-22.528 10.24c-11.264 4.608-18.432 7.68-21.504 8.192-3.072 0.512-5.632 0.512-8.192-0.512s-7.68-3.584-14.336-7.68l-40.96-26.112-9.728 50.688c-1.536 6.656-3.072 12.288-5.632 15.872-2.56 3.584-6.656 6.656-13.312 9.216l-31.744 13.312-9.216-22.016 22.016-9.216c3.072-1.536 5.632-3.072 7.168-4.608 1.536-1.536 3.072-5.632 4.096-11.264l8.704-56.32-65.024 27.648-9.216-21.504 70.656-30.208-14.336-33.28-34.816 14.848-1.024 10.24c-0.512 4.096-1.024 7.168-1.536 9.216-0.512 2.048-1.536 4.096-3.072 5.632s-4.096 3.072-7.68 4.608l-13.312 5.632-9.216-21.504 4.608-2.048c2.048-1.024 3.072-1.536 4.096-2.56 0.512-1.024 1.024-3.072 1.024-6.656l-0.512-34.816 25.6-10.752v17.92l26.624-11.264-8.192-18.944 26.112-11.264 8.192 18.944 68.608-29.184L660.48 378.88l-68.608 29.184 14.336 33.28 70.656-30.208 9.216 21.504-67.072 28.672 49.152 32.768c4.096 2.56 6.656 4.096 7.68 4.096 1.024 0 3.584-0.512 6.656-2.048l27.136-11.264z"
                    fill="#C7C7C7" p-id="9847"></path>
              </svg>
            </div>
          </template>
        </t-grid-item>
      </t-grid>
    </div>
    <div class="item-list-container">
      <div v-for="item in items" class="item-list">
        <itemCard :images="item.images" :item="item.item"></itemCard>
      </div>
    </div>
  </div>

</template>

<script lang="ts" setup>
import {onMounted, ref} from 'vue';
import itemCard from '../component/itemCard.vue'
import Item from "../model/item.ts";
import {getAllItemsApi, SerachItem} from "../apis/ItemApi.ts";
import router from "../router";

const imageCdn = 'https://tdesign.gtimg.com/mobile/demos';
const swiperList = [
  `https://img.zcool.cn/community/0135225961fec4a8012193a3560c18.jpg@1280w_1l_2o_100sh.jpg`,
  `https://img.zcool.cn/community/01f2fc58fd8930a8012160f7f3020b.jpg@1280w_1l_2o_100sh.jpg`,
  `https://ts1.cn.mm.bing.net/th/id/R-C.733e8cf61bae35a69261bdc6caeff287?rik=7ZqFnScf4NTDrA&riu=http%3a%2f%2fimg.pconline.com.cn%2fimages%2fupload%2fupc%2ftx%2fphotoblog%2f1204%2f14%2fc7%2f11251650_11251650_1334409274390.jpg&ehk=m81LJV2hEpWzJuRODh8j8BI29ykyyOlw0tYL9UfaxJ4%3d&risl=&pid=ImgRaw&r=0`,
  `https://ts1.cn.mm.bing.net/th/id/R-C.57d21ffe1af8c1a3300b1a4a6c4af3ec?rik=LtkdWdHtOAc4BA&riu=http%3a%2f%2fimg01.tooopen.com%2fDowns%2fimages%2f2010%2f4%2f20%2fsy_20100420165448321050.jpg&ehk=0rjOAKfOiV3QtCpNwMcy%2beQOHGBevKkGlKrzDTOM34o%3d&risl=&pid=ImgRaw&r=0`,
  `${imageCdn}/swiper1.png`,
];


const handleClick = (value: number) => {
  console.log('click: ', value);
};

let items = ref(new Array<Item>());
const searchCondition = ref("")


onMounted(async () => {
  await getAll();
})

let isLoading = ref(false);

const getAll = async () => {
  await getAllItemsApi().then(res => {
    console.log(res.data);
    items.value = res.data;
  })
};

const onSearch = async () => {
  isLoading.value = true
  items.value = await SerachItem({condition: searchCondition.value}).then(res => {
    return res.data
  })
  isLoading.value = false;
}
const gosell=async () =>{
   await router.push({name:"itme-new"})
}
const golostfind=async ()=>{
  await  router.push({name:"lostfind"})
}
</script>

<style scoped>
img {
  display: block;
  width: 100%;
  height: 192px;
}
.item-list-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
  overflow: auto;
  background-color: white;
  height: 44vh;
}

.example-search {
  margin-top: 8px;
  background-color: white;
  padding: 8px 16px;
}
</style>